#!/bin/bash

if [ -z $1]
then
	echo -n "Введите значение параметра: " 
	read a
else
	a="$1"
fi

case $a in
-?)
	echo "Программа копирует файлы, для которых стоит ограничение на запись от всех пользователей. Новый файл имеет в названии заданный префикс и имеет общий доступ. Для изменения префикса в имени файла, введите любой параметр, являющийся префиксом. Для получения информации введите ключ -?"
	;;
*)
	for file in "$(pwd)"/*
	do 
		if [ $(stat -c %A "$file") = '-r--r--r--' ] 
		then
			newfile="$a${file/\/home\/artur\/Рабочий стол\//}"
			touch "$newfile"
			cat "$file" > "$newfile"
			chmod 666 "$newfile"
		fi
	done
	echo completed
	;;
esac
