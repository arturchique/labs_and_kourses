artur@artur-Lenovo-ideapad-530S-15IKB:~/Documents/solutions$ cat program.c

#include <stdio.h>

long long mod(long long a,int b)

{

long long c = a/b;

if (a < 0 && b < 0 && a%b!=0)

{

c += 1;

}

if (a < 0 && b > 0)

{

c -= 1;

}

return a - c * b;

}

int main()

{

long long a,b;

int c;

long long d = 0;

scanf("%lli %lli %d",&a,&b,&c);

d = mod(a*b,c);

printf("%lli\n",d);

}

artur@artur-Lenovo-ideapad-530S-15IKB:~/Documents/solutions$

artur@artur-Lenovo-ideapad-530S-15IKB:~/Documents/solutions$ gcc -g program.c

artur@artur-Lenovo-ideapad-530S-15IKB:~/Documents/solutions$

Анализ посмертного дампа core:

artur@artur-Lenovo-ideapad-530S-15IKB:~/Documents/solutions$ ulimit -c unlimited

artur@artur-Lenovo-ideapad-530S-15IKB:~/Documents/solutions$

artur@artur-Lenovo-ideapad-530S-15IKB:~/Documents/solutions$ ./a.out

5 3 0 // mod(5*3,0) – деление на 0

Floating point exception (core dumped)

artur@artur-Lenovo-ideapad-530S-15IKB:~/Documents/solutions$

artur@artur-Lenovo-ideapad-530S-15IKB:~/Documents/solutions$ gdb -c core a.out

GNU gdb (Ubuntu 8.1-0ubuntu3) 8.1.0.20180409-git

Copyright (C) 2018 Free Software Foundation, Inc.

License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software: you are free to change and redistribute it.

There is NO WARRANTY, to the extent permitted by law. Type "show copying"

and "show warranty" for details.

This GDB was configured as "x86_64-linux-gnu".

Type "show configuration" for configuration details.

For bug reporting instructions, please see:

<http://www.gnu.org/software/gdb/bugs/>.

Find the GDB manual and other documentation resources online at:

<http://www.gnu.org/software/gdb/documentation/>.

For help, type "help".

Type "apropos word" to search for commands related to "word"...

Reading symbols from a.out...done.

[New LWP 10602]

Core was generated by `./a.out'.

Program terminated with signal SIGFPE, Arithmetic exception.

#0 0x000055a5ebb2e731 in mod (a=15, b=0) at program.c:5

5 long long c = a/b;

(gdb) quit

artur@artur-Lenovo-ideapad-530S-15IKB:~/Documents/solutions$

Динамическая отладка:

artur@artur-Lenovo-ideapad-530S-15IKB:~/Documents/solutions$ gdb

GNU gdb (Ubuntu 8.1-0ubuntu3) 8.1.0.20180409-git

Copyright (C) 2018 Free Software Foundation, Inc.

License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software: you are free to change and redistribute it.

There is NO WARRANTY, to the extent permitted by law. Type "show copying"

and "show warranty" for details.

This GDB was configured as "x86_64-linux-gnu".

Type "show configuration" for configuration details.

For bug reporting instructions, please see:

<http://www.gnu.org/software/gdb/bugs/>.

Find the GDB manual and other documentation resources online at:

<http://www.gnu.org/software/gdb/documentation/>.

For help, type "help".

Type "apropos word" to search for commands related to "word".

(gdb) help run

Start debugged program.

You may specify arguments to give it.

Args may include "*", or "[...]"; they are expanded using the

shell that will start the program (specified by the "$SHELL" environment

variable). Input and output redirection with ">", "<", or ">>"

are also allowed.

With no arguments, uses arguments last specified (with "run" or

"set args"). To cancel previous arguments and run with no arguments,

use "set args" without arguments.

To start the inferior without using a shell, use "set startup-with-shell off".

(gdb) quit

artur@artur-Lenovo-ideapad-530S-15IKB:~/Documents/solutions$

artur@artur-Lenovo-ideapad-530S-15IKB:~/Documents/solutions$ gdb a.out

GNU gdb (Ubuntu 8.1-0ubuntu3) 8.1.0.20180409-git

Copyright (C) 2018 Free Software Foundation, Inc.

License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software: you are free to change and redistribute it.

There is NO WARRANTY, to the extent permitted by law. Type "show copying"

and "show warranty" for details.

This GDB was configured as "x86_64-linux-gnu".

Type "show configuration" for configuration details.

For bug reporting instructions, please see:

<http://www.gnu.org/software/gdb/bugs/>.

Find the GDB manual and other documentation resources online at:

<http://www.gnu.org/software/gdb/documentation/>.

For help, type "help".

Type "apropos word" to search for commands related to "word"...

Reading symbols from a.out...done.

(gdb) break main

Breakpoint 1 at 0x791: file program.c, line 18.

(gdb) set args

(gdb) run

Starting program: /home/gibbon/Documents/solutions/a.out

Breakpoint 1, main () at program.c:18

18 {

(gdb) step

21 long long d = 0;

(gdb) set var d = 5

(gdb) print d

$1 = 5

(gdb) step

22 scanf("%lli %lli %d",&a,&b,&c);

(gdb) next

13 3 5

23 d = mod(a*b,c);

(gdb) ptype d

type = long long

(gdb) ptype mod

type = long long (long long, int)

(gdb) print d

$2 = 0

(gdb) step

mod (a=39, b=5) at program.c:5

5 long long c = a/b;

(gdb) step

6 if (a < 0 && b < 0 && a%b!=0)

(gdb) step

10 if (a < 0 && b > 0)

(gdb) step

14 return a - c * b;

(gdb) print (a - c * b)

$3 = 4

(gdb) step

15 }

(gdb) step

main () at program.c:24

24 printf("%lli\n",d);

(gdb) next

4

25 }

(gdb)

__libc_start_main (main=0x555555554789 <main>, argc=1, argv=0x7fffffffdee8,

init=<optimized out>, fini=<optimized out>, rtld_fini=<optimized out>,

stack_end=0x7fffffffded8) at ../csu/libc-start.c:344

344 ../csu/libc-start.c: No such file or directory.

(gdb)

[Inferior 1 (process 14642) exited normally]

(gdb) run

Starting program: /home/gibbon/Documents/solutions/a.out

Breakpoint 1, main () at program.c:18

18 {

(gdb) backtrace

#0 main () at program.c:18

(gdb) next

21 long long d = 0;

(gdb) next

22 scanf("%lli %lli %d",&a,&b,&c);

(gdb) next

-3 -13 -5

23 d = mod(a*b,c);

(gdb) step

mod (a=39, b=-5) at program.c:5

5 long long c = a/b;

(gdb) backtrace

#0 mod (a=39, b=-5) at program.c:5

#1 0x00005555555547e1 in main () at program.c:23

(gdb) continue

Continuing.

4

[Inferior 1 (process 14669) exited normally]

(gdb) quit

artur@artur-Lenovo-ideapad-530S-15IKB:~/Documents/solutions$

artur@artur-Lenovo-ideapad-530S-15IKB:~/Documents/solutions$ gdb a.out

GNU gdb (Ubuntu 8.1-0ubuntu3) 8.1.0.20180409-git

Copyright (C) 2018 Free Software Foundation, Inc.

License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software: you are free to change and redistribute it.

There is NO WARRANTY, to the extent permitted by law. Type "show copying"

and "show warranty" for details.

This GDB was configured as "x86_64-linux-gnu".

Type "show configuration" for configuration details.

For bug reporting instructions, please see:

<http://www.gnu.org/software/gdb/bugs/>.

Find the GDB manual and other documentation resources online at:

<http://www.gnu.org/software/gdb/documentation/>.

For help, type "help".

Type "apropos word" to search for commands related to "word"...

Reading symbols from a.out...done.

(gdb) list 10

5 long long c = a/b;

6 if (a < 0 && b < 0 && a%b!=0)

7 {

8 c += 1;

9 }

10 if (a < 0 && b > 0)

11 {

12 c -= 1;

13 }

14 return a - c * b;

(gdb) quit

artur@artur-Lenovo-ideapad-530S-15IKB:~/Documents/solutions$ 